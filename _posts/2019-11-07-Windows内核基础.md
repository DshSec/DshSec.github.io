## Windows内核理论基础
###  权限级别
1. 级别：最初的CPU设计者设计了4个运行级别，从R0到R3。其中R0为系统内核级，R1，R2为驱动运行级，R3为应用程序级。但是操作系统的设计者和开发商为了方便，直接将驱动和系统内核运行在了一个级别R0。因此目前在使用的就两个级别R0和R3.  
2. 通信：用户态工作在R3级别，内核态工作在R0级别，R3级别的程序只能通过NTDLL.DLL的  

### 内存空间布局  
1. x86最大支持32位寻址，因此仅有4GB(2^32)的寻址空间，被分配成了内核空间和进程空间，再加上两个64KB的非法区域和NULL空间。x64最大支持64为寻址，目前windows最大支持44位寻址空间16TB,linxu最大支持48位寻址空间256TB。但是在这些寻址空间内存在部分空洞是不可用的。windows的内存的逻辑地址分为段选择符和偏移量。通过段选择符和偏移量算出一个线性地址，再通过页表机制将线性地址映射到物理地址上，从而存取物理地址上的数据和指令。

### Windows与内核启动机制  
1. 目前的系统主要有两种启动方式：BIOS和UEFI

>##### BIOS启动的几个阶段
1. 启动自检阶段：开电源开始自检过程，计算机从BIOS载入必要的指令，执行自检，检查硬件得初始化，同时显示信息  
2. 初始化启动阶段：根据[CMOS]("https://baike.baidu.com/item/CMOS/428167?fr=aladdin")的设置，BIOS加载启动盘，将MBR(主引导记录)的引导代码写入内存，接着由MBR找到分区表找出活动分区，将第一个扇区的代码载入内存执行，引导代码检测当前使用的文件系统，然后查找ntldr文件，BIOS将控制权交给ntldr,由他完成操作系统的启动。
BOOT加载阶段、
检测
